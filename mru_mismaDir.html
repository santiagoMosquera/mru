<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulaci車n de Monster Trucks - Profe Alfonsito</title>

<style>
  :root {
    --color-primario: #0077ff;
    --color-secundario: #ff4747;
    --color-fondo: #f4f6f9;
    --color-texto: #222;
  }

  body {
    text-align: center;
    font-family: 'Poppins', Arial, sans-serif;
    background: var(--color-fondo);
    color: var(--color-texto);
    margin: 0;
    padding: 0;
  }

  h2 {
    margin: 5px 0;
  }

  .panel {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    background: white;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    padding: 10px 20px;
    margin: 15px auto;
    max-width: 900px;
    gap: 10px;
  }

  label {
    font-weight: 500;
    margin-right: 5px;
  }

  input {
    width: 70px;
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
    text-align: center;
    outline: none;
    transition: all 0.2s ease-in-out;
  }

  input:focus {
    border-color: var(--color-primario);
    box-shadow: 0 0 5px rgba(0, 119, 255, 0.4);
  }

  button {
    background: linear-gradient(135deg, var(--color-primario), #00bfff);
    border: none;
    color: white;
    font-weight: 600;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    transition: 0.2s;
  }

  button:hover {
    background: linear-gradient(135deg, #005ed9, #0099cc);
    transform: scale(1.03);
  }

  canvas {
    background: white;
    border-radius: 10px;
    border: 2px solid #ccc;
    margin: 10px auto;
    display: block;
    max-width: 95vw;
    height: auto;
  }

  p {
    margin: 5px 0;
  }

  @media (max-width: 600px) {
    .panel {
      flex-direction: column;
      align-items: stretch;
    }

    input {
      width: 100%;
    }

    button {
      width: 100%;
    }
  }
</style>
</head>
<body>

<h2>?? CLASE DE F赤SICA 每 PROFE ALFONSITO ??</h2>
<h3>Simulaci車n de Monster Trucks en la misma direcci車n</h3>
<p>Escala: 1 h = 10 s | 10 km = 1 cm</p>

<div class="panel">
  <label>Velocidad Monster A (km/h):</label>
  <input type="number" id="vel1" value="30" min="1">

  <label>Velocidad Monster B (km/h):</label>
  <input type="number" id="vel2" value="50" min="1">

  <label>Retraso Monster B (h):</label>
  <input type="number" id="delay" value="0" min="0" step="0.1">

  <label>Distancia inicial (A adelante) (km):</label>
  <input type="number" id="distancia" value="50" min="0" step="1">

  <button onclick="iniciar()">?? Iniciar simulaci車n</button>
</div>

<canvas id="canvas" width="1200" height="320"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const escalaKm = 10;
const pxPorCm = 37.8;
const escala = pxPorCm / escalaKm;
let anim;
let tiempoSim = 0;

// Im芍genes de Monster Trucks
const monsterA = new Image();
const monsterB = new Image();
monsterA.src = "https://i.pinimg.com/originals/b7/50/26/b75026551a6cea490a380541c14182ad.jpg";
monsterB.src = "https://imgcdn.stablediffusionweb.com/2024/9/5/c3c24299-3836-46fa-9956-cc5a3926ba2e.jpg";

function dibujarGrid(maxKm) {
  ctx.strokeStyle = "#eee";
  ctx.beginPath();
  for (let i = 0; i <= maxKm; i += 10) {
    const x = i * escala;
    ctx.moveTo(x, 0);
    ctx.lineTo(x, canvas.height);
  }
  ctx.stroke();

  ctx.fillStyle = "black";
  ctx.font = "12px Poppins";
  for (let i = 0; i <= maxKm; i += 20) {
    const x = i * escala;
    ctx.fillText(i + " km", x + 2, 15);
  }

  ctx.strokeStyle = "#ccc";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, 120);
  ctx.lineTo(maxKm * escala, 120);
  ctx.moveTo(0, 200);
  ctx.lineTo(maxKm * escala, 200);
  ctx.stroke();
}

function iniciar() {
  cancelAnimationFrame(anim);
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  tiempoSim = 0;

  const v1 = parseFloat(document.getElementById("vel1").value);
  const v2 = parseFloat(document.getElementById("vel2").value);
  const delay = parseFloat(document.getElementById("delay").value);
  const d0 = parseFloat(document.getElementById("distancia").value);
  const tiempoEscala = 10;

  let tEncuentro = null, xEncuentro = null;
  if (v2 > v1) {
    tEncuentro = (v2 * delay + d0) / (v2 - v1);
    xEncuentro = d0 + v1 * tEncuentro;
  }

  const maxKm = xEncuentro ? xEncuentro * 1.4 : d0 + 200;
  dibujarGrid(maxKm);

  function animar() {
    const horas = tiempoSim / tiempoEscala;
    const x1 = d0 + v1 * horas;
    const x2 = v2 * Math.max(0, horas - delay);

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    dibujarGrid(maxKm);

    ctx.strokeStyle = "rgba(0,0,255,0.3)";
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(d0 * escala, 120);
    ctx.lineTo(x1 * escala, 120);
    ctx.stroke();

    ctx.strokeStyle = "rgba(255,0,0,0.3)";
    ctx.beginPath();
    ctx.moveTo(0, 200);
    ctx.lineTo(x2 * escala, 200);
    ctx.stroke();

    const ancho = 80, alto = 80;
    ctx.drawImage(monsterA, x1 * escala - ancho / 2, 80, ancho, alto);
    ctx.drawImage(monsterB, x2 * escala - ancho / 2, 160, ancho, alto);

    if (xEncuentro) {
      const xFlag = xEncuentro * escala;
      ctx.fillStyle = "green";
      ctx.fillRect(xFlag - 2, 60, 4, 160);
      ctx.fillText("??", xFlag - 8, 60);
      ctx.fillText(`Km ${xEncuentro.toFixed(1)}`, xFlag - 25, 50);
    }

    const distancia = Math.abs(x1 - x2).toFixed(2);
    ctx.fillStyle = "black";
    ctx.fillText(`? Tiempo: ${horas.toFixed(2)} h`, 10, 300);
    ctx.fillText(`?? Distancia entre autos: ${distancia} km`, 180, 300);

    if (xEncuentro && horas >= tEncuentro) {
      ctx.fillStyle = "green";
      ctx.fillText(
        `?? ?Se encontraron en el km ${xEncuentro.toFixed(1)} a las ${tEncuentro.toFixed(2)} h!`,
        400, 300
      );
      return;
    }

    if (!xEncuentro && horas > 10) {
      ctx.fillStyle = "red";
      ctx.fillText("? No se encontrar芍n (el segundo no alcanza al primero).", 480, 300);
      return;
    }

    tiempoSim += 0.05;
    anim = requestAnimationFrame(animar);
  }

  animar();
}
</script>

</body>
</html>
