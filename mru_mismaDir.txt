<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SimulaciÃ³n de Dos Autos en la Misma DirecciÃ³n</title>
<style>
  body { text-align:center; font-family:Arial; background:#f0f0f0; }
  canvas { background:white; border:1px solid #333; margin-top:10px; }
  .panel { margin:10px auto; }
</style>
</head>
<body>

<h2>ðŸš— SimulaciÃ³n de dos autos en la misma direcciÃ³n ðŸš™</h2>
<p>Escala: 1 h = 10 s | 10 km = 1 cm</p>

<div class="panel">
  <label>Velocidad Auto 1 (km/h): </label>
  <input type="number" id="vel1" value="30" min="1">
  <label>Velocidad Auto 2 (km/h): </label>
  <input type="number" id="vel2" value="50" min="1">
  <label>Desfase salida Auto 2 (h): </label>
  <input type="number" id="delay" value="1" min="0">
  <button onclick="iniciar()">Iniciar simulaciÃ³n</button>
</div>

<canvas id="canvas" width="1200" height="300"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const escalaKm = 10;      // 10 km = 1 cm
const pxPorCm = 37.8;     // 1 cm â‰ˆ 37.8 px
const escala = pxPorCm / escalaKm; // px/km
let t = 0;
let anim;

function dibujarGrid() {
  ctx.strokeStyle = "#ddd";
  ctx.beginPath();
  for (let i = 0; i <= 400; i += 10) {
    const x = i * escala;
    ctx.moveTo(x, 0);
    ctx.lineTo(x, canvas.height);
  }
  ctx.stroke();

  ctx.fillStyle = "black";
  for (let i = 0; i <= 400; i += 20) {
    const x = i * escala;
    ctx.fillText(i + " km", x + 2, 15);
  }

  // LÃ­neas base (pistas)
  ctx.strokeStyle = "#ccc";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, 120);
  ctx.lineTo(canvas.width, 120);
  ctx.moveTo(0, 180);
  ctx.lineTo(canvas.width, 180);
  ctx.stroke();
}

function iniciar() {
  cancelAnimationFrame(anim);
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  dibujarGrid();
  t = 0;

  const vel1 = parseFloat(document.getElementById("vel1").value);
  const vel2 = parseFloat(document.getElementById("vel2").value);
  const delay = parseFloat(document.getElementById("delay").value);
  const tiempoEscala = 10; // 10 s = 1 h

  // Si el auto 2 es mÃ¡s lento y sale despuÃ©s, nunca lo alcanza
  let puntoEncuentro = null;
  if (vel2 > vel1) {
    const tiempoEncuentro = (vel1 * delay) / (vel2 - vel1);
    puntoEncuentro = vel1 * tiempoEncuentro;
  }

  function animar() {
    const horas = (t / 1000) / tiempoEscala;

    // Posiciones
    const x1 = vel1 * horas * escala;
    const x2 = vel2 * Math.max(0, horas - delay) * escala;

    // Redibujar todo
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    dibujarGrid();

    // Trayectorias
    ctx.strokeStyle = "rgba(0,0,255,0.4)";
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(0, 120);
    ctx.lineTo(x1, 120);
    ctx.stroke();

    ctx.strokeStyle = "rgba(255,0,0,0.4)";
    ctx.beginPath();
    ctx.moveTo(0, 180);
    ctx.lineTo(x2, 180);
    ctx.stroke();

    // Autos
    ctx.fillStyle = "blue";
    ctx.fillRect(x1 - 10, 110, 20, 20);
    ctx.fillStyle = "red";
    ctx.fillRect(x2 - 10, 170, 20, 20);

    // Datos
    const distancia = Math.abs((x2 - x1) / escala).toFixed(1);
    ctx.fillStyle = "black";
    ctx.fillText(`Tiempo: ${horas.toFixed(2)} h`, 10, 280);
    ctx.fillText(`Distancia entre autos: ${distancia} km`, 180, 280);

    // Si ya se alcanzaron
    if (puntoEncuentro && horas >= (puntoEncuentro / vel1)) {
      ctx.fillStyle = "green";
      ctx.fillText(`ðŸš—ðŸ’¥ðŸš™ Â¡Se encontraron en el km ${puntoEncuentro.toFixed(1)}!`, 500, 280);
      return;
    }

    t += 50;
    anim = requestAnimationFrame(animar);
  }

  // Mostrar el punto teÃ³rico de encuentro si aplica
  if (puntoEncuentro) {
    console.log(`Se encontrarÃ¡n en el km ${puntoEncuentro.toFixed(2)} luego de ${(puntoEncuentro / vel1).toFixed(2)} horas.`);
  } else {
    console.log("Los autos no se encontrarÃ¡n (el segundo es mÃ¡s lento o igual y sale despuÃ©s).");
  }

  animar();
}

dibujarGrid();
</script>

</body>
</html>
