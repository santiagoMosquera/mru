<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SimulaciÃ³n MRU - Monster Truck</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #20232a;
    color: #fff;
  }
  h1 { color: #61dafb; }

  #pista {
    position: relative;
    width: 1000px;  /* 1000px = 100km */
    height: 100px;
    margin: 40px auto;
    background: linear-gradient(#555, #222);
    border: 4px solid #444;
    overflow: hidden;
  }

  #camion {
    position: absolute;
    left: 0;
    bottom: 5px;
    width: 100px;
    transition: left 0.1s linear;
  }

  .panel {
    margin-top: 20px;
  }

  input {
    width: 80px;
    text-align: center;
    padding: 5px;
    font-size: 16px;
  }

  button {
    padding: 6px 14px;
    font-size: 16px;
    cursor: pointer;
    background: #61dafb;
    color: #000;
    border: none;
    border-radius: 4px;
  }

  #info {
    margin-top: 10px;
    font-size: 18px;
  }

  canvas {
    margin-top: 40px;
    background: #fff;
    border-radius: 8px;
  }
</style>
</head>
<body>

<h1>ðŸš™ Movimiento RectilÃ­neo Uniforme - Monster Truck</h1>
<div id="pista">
  <img id="camion" src="https://images5.alphacoders.com/444/thumb-1920-444092.jpg" alt="Monster Truck">
</div>

<div class="panel">
  <label for="velocidad">Velocidad (km/h): </label>
  <input type="number" id="velocidad" value="60" min="0">
  <button onclick="iniciarSimulacion()">Iniciar</button>
</div>

<p id="info">Tiempo: 0 h â€” Distancia: 0 km</p>

<canvas id="grafica" width="800" height="400"></canvas>

<script>
  const camion = document.getElementById('camion');
  const info = document.getElementById('info');
  const ctx = document.getElementById('grafica').getContext('2d');
  let tiempo = 0;
  let distancia = 0;
  let intervalo;
  let velocidadActual = 60;

  // Escala: 1 hora = 10 segundos, 10 km = 1 cm = 10 px
  const tiempoRealPorHora = 10 * 1000;
  const pixelesPorKm = 1; // 1 km = 1 px
  let datosTiempo = [];
  let datosDistancia = [];

  // Crear la grÃ¡fica
  const grafica = new Chart(ctx, {
    type: 'line',
    data: {
      labels: datosTiempo,
      datasets: [{
        label: 'PosiciÃ³n (km)',
        data: datosDistancia,
        borderColor: '#61dafb',
        backgroundColor: '#61dafb33',
        tension: 0.2,
        borderWidth: 3
      }]
    },
    options: {
      scales: {
        x: { title: { display: true, text: 'Tiempo (h)' } },
        y: { title: { display: true, text: 'Distancia (km)' } }
      },
      plugins: {
        legend: { labels: { color: '#000' } }
      }
    }
  });

  function iniciarSimulacion() {
    clearInterval(intervalo);
    velocidadActual = parseFloat(document.getElementById('velocidad').value);
    tiempo = 0;
    distancia = 0;
    camion.style.left = '0px';
    info.textContent = `Tiempo: 0 h â€” Distancia: 0 km`;
    datosTiempo.length = 0;
    datosDistancia.length = 0;
    grafica.update();

    const kmPorSegundoReal = velocidadActual / (tiempoRealPorHora / 1000);
    const pxPorSegundo = kmPorSegundoReal * pixelesPorKm;

    intervalo = setInterval(() => {
      tiempo += 0.1 / (tiempoRealPorHora / 1000); // horas
      distancia = velocidadActual * tiempo; // MRU: d = v * t
      camion.style.left = (distancia * pixelesPorKm) + 'px';
      info.textContent = `Tiempo: ${tiempo.toFixed(2)} h â€” Distancia: ${distancia.toFixed(2)} km`;

      // Actualizar datos de la grÃ¡fica
      datosTiempo.push(tiempo.toFixed(2));
      datosDistancia.push(distancia.toFixed(2));
      grafica.update();

      // Fin del recorrido
      if (distancia >= 100) {
        clearInterval(intervalo);
        info.textContent += " ðŸš© Fin del recorrido";
      }
    }, 100);
  }
</script>

</body>
</html>
